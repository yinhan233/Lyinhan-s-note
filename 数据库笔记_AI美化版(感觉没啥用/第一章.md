# 数据库系统概述

## 信息
- **定义**：关于现实世界事物的存在方式或运动状态反映的综合。
- **特点**：客观存在，可以感知，可以存储、加工、传递和再生。

## 数据
- **定义**：描述事物的符号记录。
- **属性**：数据库中存储的基本对象。
- **种类**：文字、图形、图像、声音。
- **特点**：数据与其语义是不可分的。

## 信息和数据的关系
- 事物的属性通过数据来表示，数据经过 **加工处理** 后形成信息。
- 信息是经过加工的数据；信息是有一定含义的数据；信息是对决策者有价值的数据；信息是预先不知道的数据。
- **关注加工过程**。

## 数据处理
- **定义**：将数据转换成信息的过程，包括数据的收集、管理、加工利用乃至信息输出演变与推导等一系列活动。
- **公式**：信息 = 数据 + 处理

## 数据管理
- **定义**：数据的收集、整理、组织、编码、存储、维护、检索和传输等操作。
- 数据管理技术的优劣，直接影响数据处理的效率。

## 数据库系统概念

### 数据库
长期储存在计算机内、有组织的、可共享的大量数据集合（结构化的数据集合）。

### 用户
- 终端用户
- 应用程序员
- 数据库管理员

### 数据库管理系统
对数据进行管理的大型系统软件，是数据库系统的核心组成部分。用户在数据库系统中的一切操作，包括数据的定义、查询、更新及各种控制，都是通过 DBMS 进行的。

![数据库管理系统](数据库管理系统.png)

#### DBMS 对数据的控制功能
1. **数据的安全性保护**
   - 使每个用户只能按指定方式使用和处理指定数据。
   - 防止不合法的使用造成的数据泄密和破坏。
2. **数据的完整性检查**
   - 将数据控制在有效的范围内。
   - 保证数据之间满足一定的关系。
3. **并发控制**
   - 对多用户的并发操作加以控制和协调。
   - 防止相互干扰而得到错误的结果。
4. **数据库恢复**
   - 将数据库从错误状态恢复到某一已知的正确状态。

### 数据库系统
- **定义**：计算机系统中引入数据库后的系统组成。在不引发混淆的情况下，常简称为“数据库”。
- **构成**：数据库、数据库管理系统、应用系统、数据库管理员和用户。

## 数据库技术的产生和发展

### 经历的阶段
1. **人工管理阶段**
   - 数据不保存，不共享。
   - 数据面向应用。
2. **文件系统阶段**
   - 数据可长期保存。
   - 共享性差，由文件系统管理数据。
   - **数据具有一定的共享性**。
   
   **要点**：
   1. **文件系统管理的核心模式**：将数据存储在永久性系统文件中，编写配套应用程序来操作数据。
   2. **两大弊端**：
      - **数据冗余 + 不一致**：同一信息在不同文件重复存储，更新易不同步。
      - **数据访问困难**：需求变化时，传统系统无法快速适配，需频繁修改程序。

3. **数据库系统阶段**
   - 数据共享性高。
   - 由数据库系统管理数据。

   **目标**：解决数据冗余和不一致、数据访问困难、数据孤立、完整性、原子性、并发访问异常、安全性等问题。

### 发展动力
- 应用需求的推动。
- 计算机软硬件的发展。

## 数据模型

### 定义
用来抽象、表示和处理现实世界中的数据和信息。

### 三方面要求
1. 能比较真实地模拟现实世界。
2. 容易为人所理解。
3. 易于在计算机上实现。

### 两步抽象过程
1. 现实世界中的客观对象抽象为 **概念模型**。
2. 将概念模型转换为 DBMS 支持的 **数据模型**。

### 两个模型
- **概念模型**（信息模型）：按用户观点来对数据和信息建模。
- **数据模型**：按计算机系统的观点对数据建模，主要包含网状、层次、关系模型。

![数据模型分类](数据模型.png)

### 概念模型

#### 实体
- **定义**：客观存在并可相互区别的事物。
- 可以是人、事物、抽象概念或联系。

#### 实体集
同型实体的集合。

#### 属性
实体所具有的某一特性。

#### 主键
唯一标识实体的属性集（别名：码、关键字）。

#### 联系
现实世界中事物内部以及事物之间的联系，在信息世界中反映为实体内部的联系和实体之间的联系。可以是一对一、一对多、多对多。

#### 多对多联系
如果对于实体集 A 中的每一个实体，实体集 B 中有 n 个实体与之联系；反之，对于实体集 B 中的每一个实体，实体集 A 中也有 m 个实体与之联系，则称实体集 A 与实体集 B 具有多对多联系，记作 m:n。

### 数据模型组成要素

#### 数据结构
- **定义**：对象类型的集合。
- 包含两类对象：
  1. 与数据类型、内容、性质有关的对象。
  2. 与数据之间联系有关的对象。
- 是对系统静态特性的描述。

#### 数据操作
- **定义**：对数据库中各种对象的实例允许执行的操作及有关的操作规则。
- **操作类型**：检索和更新（插入、删除、修改）。

#### 数据的约束条件
- **定义**：一组完整性规则的集合。
- 完整性规则是给定的数据模型中数据及其联系所具有的制约和储存规则，用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效、相容。

### 数据模型的分类
- **非关系模型**：层次模型、网状模型（以基本层次联系为基本单位）。
- **关系模型**（表）。
- **面向对象模型**（对象）。

## 关系模型

### 基本概念
- **关系**：对应一张表。
- **元组**：表中的一行。
- **属性**：表中的一列。
- **主码**：表中的某个属性组，可以唯一确定一个元组。
- **域**：属性的取值范围。
- **分量**：元组中的一个属性值。
- **关系模式**：对关系的描述。格式：关系名(属性1, 属性2, 属性3, …)。  
  例如：学生(学号, 姓名, 年龄, 性别, 系, 年级)。

### 实体及实体间联系的表示方法
- **实体型**：直接用关系（表）表示。
- **属性**：用属性名表示。
- **一对一/一对多**：隐含在实体对应的关系中。
- **多对多**：直接用关系表示。

**关系必须是规范化的**，满足一定的规范条件：
- 关系里的每个分量必须是“不能再拆分的最小数据项”。例如，一个单元格里不能存放多个复合信息（如“工资”又拆分为“基本、工龄、职务”）。

### 关系模型的数据操纵
查询、插入、删除、更新。

数据操作都是集合操作，操作对象和操作结果都是关系（若干元组的集合）。存取路径对用户隐蔽。

### 关系模型的完整性约束
实体完整性、参照完整性、用户定义的完整性。

## 数据库系统的模式结构

### 数据库系统模式的概念
- **型**：对某一类数据的结构和属性的说明。例如：(编号，姓名，性别，系别)。
- **值**：是型的一个具体赋值。例如：(900201，张三，男，计算机)。
- **模式**：
  - 数据库逻辑结构和特征的描述。
  - 型的描述，反映数据的结构及其联系。
  - 模式是相对稳定的。
- **实例**：
  - 模式的一个具体值。
  - 反映数据库某一时刻的状态。
  - 同一个模式可以有很多实例。
  - 实例随数据库中的数据更新而变动。

**简单说**：数据库中的数据会随时变化，特定时刻的信息集合称作一个实例。数据库的总体设计称作模式，模式不频繁变化。

### 三级模式结构
![三级模式](三级模式.png)

- **物理模式**：数据库在物理层的总体设计，又称内模式。
- **逻辑模式**：数据库在逻辑层的总体设计，简称“模式”。实例是模式的具体体现（模式的一个值）。
- **视图模式**：数据库在视图层/概念层的总体设计，又称子模式或外模式。

通常，一个 DBMS 支持一个物理模式、一个逻辑模式和多个视图模式。

### 数据独立性

#### 概念
在某个层次上修改数据库的模式定义，而不影响其上层模式的能力。分为两个层次：
1. **物理数据独立性**：避免数据物理结构变化的影响。
2. **逻辑数据独立性**：避免数据逻辑结构变化的影响（例如：Faculty 关系拆分为 `faculty_public` 和 `Faculty_private`，`courseinfo` 不受影响）。

#### 模式修改的常见原因
1. **物理层**：为提升性能（偶尔调整）。
2. **逻辑层**：数据逻辑结构变化（频繁调整）。

## 数据库系统的组成
- 数据库
- 数据库管理系统
- 应用系统
- 数据管理员
- 终端用户

![数据库系统](数据库系统.png)